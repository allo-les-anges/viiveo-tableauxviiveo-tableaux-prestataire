<div id="modalOverlay" style="display: none;">
    <div id="modalContent">
        <div id="stepQR" style="display:flex; flex-direction:column; align-items:center;">
            <h2>📸 Scanner le QR code client</h2>
            <div id="qr-reader"></div>
            <button id="btnCancelQR">Annuler</button>
        </div>

        <div id="stepForm" style="display:none;">
            <h2>📝 Fiche d'observation</h2>
            <form id="obsForm">
                <label>Nom du client</label>
                <input type="text" id="clientName" readonly />

                <label>Date de l'observation</label>
                <input type="date" id="obsDate" required />

                <label>État de santé</label>
                <textarea id="etatSante" rows="3" placeholder="Décrire l'état de santé..."></textarea>

                <label>État de forme</label>
                <select id="etatForme" required>
                    <option value="">-- Choisir --</option>
                    <option>Très bon</option>
                    <option>Bon</option>
                    <option>Moyen</option>
                    <option>Faible</option>
                    <option>Très faible</option>
                </select>

                <label>Environnement</label>
                <textarea id="environnement" rows="3" placeholder="Décrire l'environnement..."></textarea>

                <label>Photos (max 3)</label>
                <input type="file" id="photos" accept="image/*" multiple />
                <div id="photosPreview"></div>

                <button type="submit">Envoyer la fiche</button>
                <button type="button" id="btnCancelForm">Annuler</button>
            </form>
        </div>

        <div id="stepSuccess" style="display:none; text-align:center;">
            <h2>✅ Fiche envoyée avec succès !</h2>
            <button id="btnCloseSuccess">Fermer</button>
        </div>
    </div>
</div>
